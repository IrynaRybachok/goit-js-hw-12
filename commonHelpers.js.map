{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-apy.js","../src/js/render-functions.js","../src/js/load-more-btn.js","../src/js/spiner.js","../src/main.js"],"sourcesContent":["export default searchImegesByQuery;\nimport axios from 'axios';\n\naxios.defaults.baseURL = \"https://pixabay.com\";\n\nfunction searchImegesByQuery({q = \"query\", page = 1, per_page = 15} = {\n    q: \"query\",\n    page: 1,\n    per_page: 15,\n}){\n\n    return axios.get(\"/api/\", {\n        params: {\n            key: \"45131353-6378824e083214db07911a1d4\",\n            q,\n            image_type: \"photo\",\n            orientation: \"horizontal\",\n            safesearch: \"true\",\n            page,\n            per_page\n        }}).then(({data}) => data);\n}\n\n","// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nexport default renderImg;\nconst imageContainer = document.querySelector(\".img-container-list\");\nconst loader = document.querySelector('.loader');\n\n\n\nfunction renderImg(images){\n    loader.style.display = 'none';\n\n    if(!images.length){\n        iziToast.show({\n            title: 'Error',\n            titleColor: '#FAFAFB',\n            titleSize: '16px',\n            titleLineHeight: '24px',\n            position: 'topRight',\n            maxWidth: '432px',\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n            messageColor: '#FAFAFB',\n            messageSize: '16px',\n            messageLineHeight: ' 24px',\n            backgroundColor: '#EF4040',\n        });\n        return;\n    }\n    \n    imageContainer.insertAdjacentHTML(\"beforeend\", createMarkup(images));\n\n    const refreshPage = new SimpleLightbox('.wrap-img-item a', { \n        captions: true,\n        captionsData: 'alt',\n        captionDelay: 250,\n    });\n\n    refreshPage.refresh();\n}\n\nfunction createMarkup(arr){\n    return arr.map(({webformatURL, largeImageURL, tags, likes, views, comments, downloads}) =>\n    `<li class=\"img-container-item\">\n        <div class=\"wrap-img-item\">\n            <a href=\"${largeImageURL}\"><img class=\"img-item\" src=\"${webformatURL}\" alt=\"${tags}\"/></a>\n        </div>\n        <div class=\"wrap-img-discr\">\n            <ul class=\"img-discr-list\">\n                <li class=\"img-discr-item\">\n                    <h2 class=\"img-discr-item-header\">Likes</h2>\n                    <p class=\"img-discr-item-text\">${likes}</p>\n                </li>\n                <li class=\"img-discr-item\">\n                    <h2 class=\"img-discr-item-header\">Views</h2>\n                    <p class=\"img-discr-item-text\">${views}</p>\n                </li>\n                <li class=\"img-discr-item\">\n                    <h2 class=\"img-discr-item-header\">Comments</h2>\n                    <p class=\"img-discr-item-text\">${comments}</p>\n                </li><li class=\"img-discr-item\">\n                    <h2 class=\"img-discr-item-header\">Downloads</h2>\n                    <p class=\"img-discr-item-text\">${downloads}</p>\n                </li>\n            </ul>\n        </div>\n    </li>`)\n    .join(\"\");\n}","export default class ButtonService {\n    constructor(buttonEL, hiddenClass) {\n    this.buttonEL = buttonEL;\n    this.hiddenClass = hiddenClass;\n    }\n\n    hide() {\n    this.buttonEL.classList.add(this.hiddenClass);\n    }\n\n    show() {\n    this.buttonEL.classList.remove(this.hiddenClass);\n    }\n\n    disable() {\n    this.buttonEL.disabled = true;\n    }\n\n    enable() {\n    this.buttonEL.disabled = false;\n    }\n}","export default class SpinerServise {\n    constructor(spinerEl){\n        this.spinerEl = spinerEl;\n    }\n\n    hide(){\n        this.spinerEl.style.display = 'none';\n    }\n\n    show(){\n        this.spinerEl.style.display = 'block';\n    }\n}","\n// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport searchImegesByQuery from \"./js/pixabay-apy\";\nimport renderImg from \"./js/render-functions\";\nimport ButtonService from \"./js/load-more-btn\";\nimport SpinerServise from \"./js/spiner\";\n\nconst form = document.querySelector('.search-img-form');\nconst loader = document.querySelector('.loader');\nconst imageContainer = document.querySelector('.img-container-list');\nconst btnLoadMore = document.querySelector('.load-more');\nconst btnService = new ButtonService(btnLoadMore, \"is-hidden\");\nconst spiner = new SpinerServise( loader );\n\nconst params = {\n    page: 1,\n    per_page: 15,\n    q: \"\",\n    maxPage: 0,\n};\n\nform.addEventListener(\"submit\", heandlyClickBtnSearch);\nbtnService.hide();\nspiner.hide();\n\nasync function heandlyClickBtnSearch(event){\n    event.preventDefault();\n    spiner.show();\n    imageContainer.innerHTML = '';\n\n    params.q = event.currentTarget.elements.name.value.trim().toLowerCase();\n\n    if (!params.q){\n\n        iziToast.show({\n            title: 'Caution',\n            titleColor: '#FAFAFB',\n            titleSize: '16px',\n            titleLineHeight: '24px',\n            position: 'topRight',\n            maxWidth: '432px',\n            message: 'Ops.. You forgot to write the keyword!',\n            messageColor: '#FAFAFB',\n            messageSize: '16px',\n            messageLineHeight: ' 24px',\n            backgroundColor: '#FFA000',\n        });\n        spiner.hide();\n        form.reset();\n        return;\n    }\n\n    btnService.show();\n    btnService.disable();\n\n    params.page = 1;\n\n    try {\n        const { hits, totalHits } = await searchImegesByQuery(params);\n        params.maxPage = Math.ceil(totalHits / params.per_page);\n        renderImg(hits);\n\n        if(params.maxPage > 1){\n            btnService.enable();\n            btnLoadMore.addEventListener(\"click\", handleLoadMore);\n        }else{\n            btnService.hide();\n        }\n    } catch(err){\n        imageContainer.innerHTML = '';\n        spiner.hide();\n        btnService.hide()\n        if (err.name === 'TypeError' && err.message.includes(\"Failed to fetch\")) {\n            iziToast.show({\n                title: 'Error',\n                titleColor: '#FAFAFB',\n                titleSize: '16px',\n                titleLineHeight: '24px',\n                position: 'topRight',\n                maxWidth: '432px',\n                message: 'No internet connection',\n                messageColor: '#FAFAFB',\n                messageSize: '16px',\n                messageLineHeight: ' 24px',\n                backgroundColor: '#EF4040',\n            });\n        } else {\n            spiner.hide();\n            btnService.hide()\n            iziToast.show({\n                title: 'Error',\n                titleColor: '#FAFAFB',\n                titleSize: '16px',\n                titleLineHeight: '24px',\n                position: 'topRight',\n                maxWidth: '432px',\n                message: `An error occurred: ${err.message}`,\n                messageColor: '#FAFAFB',\n                messageSize: '16px',\n                messageLineHeight: ' 24px',\n                backgroundColor: '#EF4040',\n            });\n        }\n    }\n    finally{\n        form.reset()\n    }\n}\n\nasync function handleLoadMore(){\n    btnService.hide();\n    spiner.show()\n    params.page += 1;\n\n    try{\n        const { hits } = await searchImegesByQuery(params);\n        renderImg( hits );\n        myScroll();\n        btnService.show();\n    } catch(err){\n        \n        spiner.hide()\n        iziToast.show({\n            title: 'Error',\n            titleColor: '#FAFAFB',\n            titleSize: '16px',\n            titleLineHeight: '24px',\n            position: 'topRight',\n            maxWidth: '432px',\n            message: `An error occurred: ${err.message}`,\n            messageColor: '#FAFAFB',\n            messageSize: '16px',\n            messageLineHeight: ' 24px',\n            backgroundColor: '#EF4040',\n        });\n    } finally{\n        if(params.page === params.maxPage){\n            btnService.hide();\n            btnLoadMore.removeEventListener(\"click\", handleLoadMore);\n            iziToast.show({\n                position: 'topRight',\n                maxWidth: '432px',\n                message: \"We're sorry, but you've reached the end of search results.\",\n                messageColor: '#FAFAFB',\n                messageSize: '16px',\n                messageLineHeight: ' 24px',\n                backgroundColor: '#09F',\n            });\n        } else{\n            btnService.enable();\n        }\n    }\n}\n\nfunction myScroll(){\n    const container = document.querySelector(\".img-container-item\");\n    const containerParam = container.getBoundingClientRect().height;\n    window.scrollBy({\n        top: containerParam * 2,\n        behavior: \"smooth\",\n    });\n}"],"names":["axios","searchImegesByQuery","q","page","per_page","data","imageContainer","loader","renderImg","images","iziToast","createMarkup","SimpleLightbox","arr","webformatURL","largeImageURL","tags","likes","views","comments","downloads","ButtonService","buttonEL","hiddenClass","SpinerServise","spinerEl","form","btnLoadMore","btnService","spiner","params","heandlyClickBtnSearch","event","hits","totalHits","handleLoadMore","err","myScroll","containerParam"],"mappings":"owBAGAA,EAAM,SAAS,QAAU,sBAEzB,SAASC,EAAoB,CAAC,EAAAC,EAAI,QAAS,KAAAC,EAAO,EAAG,SAAAC,EAAW,EAAE,EAAI,CAClE,EAAG,QACH,KAAM,EACN,SAAU,EACd,EAAE,CAEE,OAAOJ,EAAM,IAAI,QAAS,CACtB,OAAQ,CACJ,IAAK,qCACL,EAAAE,EACA,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,KAAAC,EACA,SAAAC,CACZ,CAAS,CAAC,EAAE,KAAK,CAAC,CAAC,KAAAC,CAAI,IAAMA,CAAI,CACjC,CCXA,MAAMC,EAAiB,SAAS,cAAc,qBAAqB,EAC7DC,EAAS,SAAS,cAAc,SAAS,EAI/C,SAASC,EAAUC,EAAO,CAGtB,GAFAF,EAAO,MAAM,QAAU,OAEpB,CAACE,EAAO,OAAO,CACdC,EAAS,KAAK,CACV,MAAO,QACP,WAAY,UACZ,UAAW,OACX,gBAAiB,OACjB,SAAU,WACV,SAAU,QACV,QAAS,2EACT,aAAc,UACd,YAAa,OACb,kBAAmB,QACnB,gBAAiB,SAC7B,CAAS,EACD,MACH,CAEDJ,EAAe,mBAAmB,YAAaK,EAAaF,CAAM,CAAC,EAE/C,IAAIG,EAAe,mBAAoB,CACvD,SAAU,GACV,aAAc,MACd,aAAc,GACtB,CAAK,EAEW,QAAO,CACvB,CAEA,SAASD,EAAaE,EAAI,CACtB,OAAOA,EAAI,IAAI,CAAC,CAAC,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,IACrF;AAAA;AAAA,uBAEmBL,CAAa,gCAAgCD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qDAMzCC,CAAK;AAAA;AAAA;AAAA;AAAA,qDAILC,CAAK;AAAA;AAAA;AAAA;AAAA,qDAILC,CAAQ;AAAA;AAAA;AAAA,qDAGRC,CAAS;AAAA;AAAA;AAAA;AAAA,UAIpD,EACL,KAAK,EAAE,CACZ,CCzEe,MAAMC,CAAc,CAC/B,YAAYC,EAAUC,EAAa,CACnC,KAAK,SAAWD,EAChB,KAAK,YAAcC,CAClB,CAED,MAAO,CACP,KAAK,SAAS,UAAU,IAAI,KAAK,WAAW,CAC3C,CAED,MAAO,CACP,KAAK,SAAS,UAAU,OAAO,KAAK,WAAW,CAC9C,CAED,SAAU,CACV,KAAK,SAAS,SAAW,EACxB,CAED,QAAS,CACT,KAAK,SAAS,SAAW,EACxB,CACL,CCrBe,MAAMC,CAAc,CAC/B,YAAYC,EAAS,CACjB,KAAK,SAAWA,CACnB,CAED,MAAM,CACF,KAAK,SAAS,MAAM,QAAU,MACjC,CAED,MAAM,CACF,KAAK,SAAS,MAAM,QAAU,OACjC,CACL,CCDA,MAAMC,EAAO,SAAS,cAAc,kBAAkB,EAChDnB,EAAS,SAAS,cAAc,SAAS,EACzCD,EAAiB,SAAS,cAAc,qBAAqB,EAC7DqB,EAAc,SAAS,cAAc,YAAY,EACjDC,EAAa,IAAIP,EAAcM,EAAa,WAAW,EACvDE,EAAS,IAAIL,EAAejB,GAE5BuB,EAAS,CACX,KAAM,EACN,SAAU,GACV,EAAG,GACH,QAAS,CACb,EAEAJ,EAAK,iBAAiB,SAAUK,CAAqB,EACrDH,EAAW,KAAI,EACfC,EAAO,KAAI,EAEX,eAAeE,EAAsBC,EAAM,CAOvC,GANAA,EAAM,eAAc,EACpBH,EAAO,KAAI,EACXvB,EAAe,UAAY,GAE3BwB,EAAO,EAAIE,EAAM,cAAc,SAAS,KAAK,MAAM,OAAO,cAEtD,CAACF,EAAO,EAAE,CAEVpB,EAAS,KAAK,CACV,MAAO,UACP,WAAY,UACZ,UAAW,OACX,gBAAiB,OACjB,SAAU,WACV,SAAU,QACV,QAAS,yCACT,aAAc,UACd,YAAa,OACb,kBAAmB,QACnB,gBAAiB,SAC7B,CAAS,EACDmB,EAAO,KAAI,EACXH,EAAK,MAAK,EACV,MACH,CAEDE,EAAW,KAAI,EACfA,EAAW,QAAO,EAElBE,EAAO,KAAO,EAEd,GAAI,CACA,KAAM,CAAE,KAAAG,EAAM,UAAAC,CAAS,EAAK,MAAMjC,EAAoB6B,CAAM,EAC5DA,EAAO,QAAU,KAAK,KAAKI,EAAYJ,EAAO,QAAQ,EACtDtB,EAAUyB,CAAI,EAEXH,EAAO,QAAU,GAChBF,EAAW,OAAM,EACjBD,EAAY,iBAAiB,QAASQ,CAAc,GAEpDP,EAAW,KAAI,CAEtB,OAAOQ,EAAI,CACR9B,EAAe,UAAY,GAC3BuB,EAAO,KAAI,EACXD,EAAW,KAAM,EACbQ,EAAI,OAAS,aAAeA,EAAI,QAAQ,SAAS,iBAAiB,EAClE1B,EAAS,KAAK,CACV,MAAO,QACP,WAAY,UACZ,UAAW,OACX,gBAAiB,OACjB,SAAU,WACV,SAAU,QACV,QAAS,yBACT,aAAc,UACd,YAAa,OACb,kBAAmB,QACnB,gBAAiB,SACjC,CAAa,GAEDmB,EAAO,KAAI,EACXD,EAAW,KAAM,EACjBlB,EAAS,KAAK,CACV,MAAO,QACP,WAAY,UACZ,UAAW,OACX,gBAAiB,OACjB,SAAU,WACV,SAAU,QACV,QAAS,sBAAsB0B,EAAI,OAAO,GAC1C,aAAc,UACd,YAAa,OACb,kBAAmB,QACnB,gBAAiB,SACjC,CAAa,EAER,QACM,CACHV,EAAK,MAAO,CACf,CACL,CAEA,eAAeS,GAAgB,CAC3BP,EAAW,KAAI,EACfC,EAAO,KAAM,EACbC,EAAO,MAAQ,EAEf,GAAG,CACC,KAAM,CAAE,KAAAG,CAAM,EAAG,MAAMhC,EAAoB6B,CAAM,EACjDtB,EAAWyB,CAAI,EACfI,IACAT,EAAW,KAAI,CAClB,OAAOQ,EAAI,CAERP,EAAO,KAAM,EACbnB,EAAS,KAAK,CACV,MAAO,QACP,WAAY,UACZ,UAAW,OACX,gBAAiB,OACjB,SAAU,WACV,SAAU,QACV,QAAS,sBAAsB0B,EAAI,OAAO,GAC1C,aAAc,UACd,YAAa,OACb,kBAAmB,QACnB,gBAAiB,SAC7B,CAAS,CACT,QAAa,CACFN,EAAO,OAASA,EAAO,SACtBF,EAAW,KAAI,EACfD,EAAY,oBAAoB,QAASQ,CAAc,EACvDzB,EAAS,KAAK,CACV,SAAU,WACV,SAAU,QACV,QAAS,6DACT,aAAc,UACd,YAAa,OACb,kBAAmB,QACnB,gBAAiB,MACjC,CAAa,GAEDkB,EAAW,OAAM,CAExB,CACL,CAEA,SAASS,GAAU,CAEf,MAAMC,EADY,SAAS,cAAc,qBAAqB,EAC7B,sBAAqB,EAAG,OACzD,OAAO,SAAS,CACZ,IAAKA,EAAiB,EACtB,SAAU,QAClB,CAAK,CACL"}